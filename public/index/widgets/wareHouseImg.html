<template>
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
        <h4 class="modal-title" id="gridModalLabel">选择图片</h4>
    </div>
    <div class="modal-body page-wrapper" style="overflow: hidden;">
        <aside class="page-sidebar col-md-2 col-sm-4 affix-top">
            <section class="widget">
                <ul class="nav nav-tabs nav-stacked media-tabs">
                    <li class="active">
                        <a href="#tab_1" data-toggle="tab">
                            所有图片
                        </a>
                    </li>
                    <!--<li>-->
                        <!--<a href="#tab_2" data-toggle="tab">-->
                            <!--logo-->
                        <!--</a>-->
                    <!--</li>-->
                    <li>
                        <a href="#tab_3" data-toggle="tab">
                            幻灯片
                        </a>
                    </li>
                    <li>
                        <a href="#tab_4" data-toggle="tab">
                            新闻列表
                        </a>
                    </li>
                    <li>
                        <a href="#tab_5" data-toggle="tab">
                            师资队伍
                        </a>
                    </li>
                </ul>
            </section><!--//widget-->
        </aside><!--//page-sidebar-->
        <div class="tab-content col-md-10 col-sm-8 ">
            <div id="tab_1" class="tab-pane active">
                <div  class="Warehouse-wrapper">
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/slides/slide-1.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/slides/slide-2.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/slides/slide-3.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/slides/slide-4.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-4.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-5.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-3.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-4.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-1.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-2.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-5.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-4.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-5.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-1.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-2.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-3.jpg">
                    </div>
                </div>
            </div>

            <div id="tab_3" class="tab-pane">
                <div  class="Warehouse-wrapper">
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/slides/slide-1.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/slides/slide-2.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/slides/slide-3.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/slides/slide-4.jpg">
                    </div>
                </div>
            </div>
            <div id="tab_4" class="tab-pane">
                <div  class="Warehouse-wrapper">
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-4.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-5.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-3.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-4.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-1.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-2.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-5.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-4.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-5.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-1.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-2.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/news/news-thumb-3.jpg">
                    </div>
                </div>
            </div>
            <div id="tab_5" class="tab-pane">
                <div  class="Warehouse-wrapper">
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/t_01.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/t_02.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/t_10.jpg">
                    </div>
                    <div class="Warehouse-item col-sm-3">
                        <img src="index/images/t_68.jpg">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <form>
            <div class="upload-btn btn btn-theme">
                        <span><i class="glyphicon glyphicon-upload"></i>上传图片
                        </span>
                <input type="file">
            </div>
        </form>
        <button type="button" class="btn btn-theme btn-save">确定</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
    </div>
</template>
<script>

    module.exports=function(){
        return {
            init:function(el,params){

                //$(el).find('.modal-footer').append($('<button type="button" class="btn btn-theme btn-custom">自定义按钮</button>'));

//                var btn = $('<button type="but ton" class="btn btn-theme btn-custom">上传</button>');
//                btn.on('click',function(ev){
//                    var row = $(el).find('.activity-item:last').clone();
//                    $(row).find('input').val('');
//
//                });
//                btn.appendTo($(el).parents('.modal').find('.modal-footer'));
//                $(el).parents('.modal').one('hide.bs.modal',function(ev){
//                    // $(btn)[0].parentNode.removeChild($(btn)[0]);
//                    $(btn).remove();
//                });

                $(el).find('nav-tabs').on('shown.bs.tab',function(ev){
                    //alert($(ev.target).html());
                    $.get('/resource',function(data){
                        Widget.renderFile('/index/blocks/resourcelist.ejs',data);
                    })
                });
            },
            save:function(){
//                 alert(this.init);
                var list = [];
                $(el).find('.Warehouse-item').each(function(){
                    console.log("in");
                    if($(this).find('img').src){
                        console.log("go die");
                        list.push({tab:$(this).parents('.tab-pane').attr("id"),src:$(this).find("img").src});
                    }

                });
//                alert(list);
//                alert("aa");
//                params['data']['common'] =  list;
//                Widget.renderFile('/blocks/links.ejs', params, $('[blockid=links]'));
//                $.ajax({
//                    method:'put',
//                    url:'/data/common/img',
//                    data:JSON.stringify(list),
//                    contentType:'application/json',
//                    success:function(resp){
//                        alert(resp);
//                        $(el).parents('.modal').modal('hide');
//                    }
//                });
            }
        }
    }
</script>